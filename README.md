# Event Logging XML Schema

[![Build Status](https://travis-ci.org/gchq/event-logging-schema.svg?branch=master)](https://travis-ci.org/gchq/event-logging-schema)

Event Logging is an XML Schema for describing the auditable events generated by computer systems, hardware devices and access control systems. It is intended to act as a common standard that bespoke logging formats (such as Apache web server or Linux auditd logs) can be translated into, using a tool such as [Stroom](https://github.com/gchq/stroom).

The aim of the schema is to normalise logging data into a common form meaning that analysts do not need to understand multiple log formats all with their own unique features. Also normalised log events from a bespoke system can be understood years after the event was created and when the development team responsible for the bespoke system have all disappeared.

This schema has been in use since 2009 and has evolved over that time to cater for the wide variety of auditable events seen on production systems. It is used as the common language for event logging for hundreds of applications, operating systems and hardware devices, ranging from commercial off-the-shelf products to bespoke in-house applications. 

For bespoke in-house systems the schema serves as common approach to creating auditable events, and reduces the need for the developers to re-invent a new log event structure and taxonomy.

## Documentation

See [here](./docs/SUMMARY.md) for more detail about the structure of the schema.

## Building the schema

The master version of the schema is located in the root of this repository (`event-logging.xsd`). This is the version that changes are made to. A build process exists to take this schema and apply a number of XSLT transformations to it to produce a releasable version, along with any other variants of it. Currently the build process takes the master version and applies a set of non-breaking transformations to it to maintain a consistent order of simple/complex type definitions and attributes. This cleaned version is the version that will be released. The build process also creates a _client_ version of the schema. This version is intended for use by client systems as certain elements have been removed that the client system would not be required to populate. The client version also adds `<Event>` as a root element to allow the sending of individual event objects.

The transformations are configured in the file `event-logging-transformations/pipelines/configuration.yml`. Each item in the _pipelines_ section will produce an XMLSchema file intended for release. The master version of the schema is not intended for release.

To build the variants of the schema run the following command from the root of the repository:

`./gradlew clean build`

To test a build with a release version applied:


`./gradlew clean build -Pversion=vX.Y.Z`

## Process for releasing a new version of the schema

When you are ready to release a new version of the schema ensure you have done the following: 

1. Ensure the CHANGELOG.md file has details of all changes since the last released version.

1. Update the major version number in the `suffix` property of the `configuration.yml` file.

1. Update the enumeration in the _VersionSimpleType_ in the master schema with the version number that is about to be released.

1. Update the following attributes in the schema:

    * `schema/targetNamespace`

    * `schema/version`

    * `schema/id`

1. Then run the following command to trigger a build and release in Travis.

    `git tag -a vX.Y.Z`

    (When prompted to enter the commit message set the first line to `event-logging-vX.Y.Z` and lines 3+ to be the changes made, as extracted from the CHANGELOG.md file. Once the tag is picked up by Travis, the build will be run and the variants will be released to GitHub.)

1. Once the release has been tagged and built Update the versions in the schema to be something like `X.Y.0-SNAPSHOT` where X.Y.0 is the next minor version number. This makes it clear that the version in source control is not a release version.


